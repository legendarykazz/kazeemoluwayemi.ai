{
  "name": "automated post",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 8
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        -752,
        -64
      ],
      "id": "f0ba038c-b12a-4479-add3-e1cc238f23b9",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -768,
        112
      ],
      "id": "66745326-fcf2-462f-9321-c4f409b3b3aa",
      "name": "When clicking ‘Execute workflow’"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "160TV4rIY_Uh6yBQEQCUwnQMyHI7DOHCdlQQ21RAFMhE",
          "mode": "list",
          "cachedResultName": "post",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/160TV4rIY_Uh6yBQEQCUwnQMyHI7DOHCdlQQ21RAFMhE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/160TV4rIY_Uh6yBQEQCUwnQMyHI7DOHCdlQQ21RAFMhE/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "status",
              "lookupValue": "To Do"
            }
          ]
        },
        "options": {
          "returnFirstMatch": true
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -560,
        -64
      ],
      "id": "b7728970-c718-4d5c-b7ca-5a8290cc4778",
      "name": "Get row(s) in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "sZZFN1ncUySEXJWt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.tavily.com/search",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 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"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"query\": \"Search the web for trending articles on {{ $json.topic }}\",\n  \"search_depth\": \"basic\",\n  \"chunks_per_source\": 3,\n  \"max_results\": 3,\n  \"topic\": \"general\",\n  \"time_range\": null,\n  \"start_date\": \"2025-02-09\",\n  \"end_date\": \"2025-12-29\",\n  \"include_answer\": false,\n  \"include_raw_content\": false,\n  \"include_images\": false,\n  \"include_image_descriptions\": false,\n  \"include_favicon\": false,\n  \"include_domains\": [],\n  \"exclude_domains\": [],\n  \"country\": null,\n  \"auto_parameters\": false,\n  \"include_usage\": false\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -336,
        112
      ],
      "id": "8b169fc1-ad3e-4025-972f-f419ea36ef66",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=1.{{ $json.results[0].content }}\n2.{{ $json.results[1].content }}\n3.{{ $json.results[2].content }}",
        "options": {
          "systemMessage": "=\nTitle MASTER PROMPT: n8n Agent System Prompt for Trend Based LinkedIn and Facebook Posts\n\nROLE & MISSION\nYou are an n8n AI Agent for a content creator. Your mission is to create original, balanced, educative LinkedIn and Facebook posts by synthesising insights from three trending web sources provided as input, written in British English with a distinctive voice inspired by the late Prof. Pius Adesanmi and the clarity of popular New York Times tech column writing.\n\nOBJECTIVE\nGiven an input topic plus three article excerpts, produce one high quality LinkedIn post and one high quality Facebook post that are non generic, fact grounded, and engaging, including a strong hook and a clear call to action.\n\nINPUT\nYou will receive, per run:\n1) Topic or angle (user input)\n2) Platform preference (LinkedIn, Facebook, or both)\n3) Audience (optional): founders, professionals, educators, policy, general tech readers\n4) Three web source payloads (exactly three), each containing:\n   - Source title\n   - Publisher or site name\n   - Publish date (if available)\n   - URL (if available)\n   - Extracted key passages or summary text (the agent must rely only on what is provided)\n5) Any constraints (optional): word count range, region focus, tone preference, forbidden phrases\n\nAssumptions (use if missing)\n- If audience is missing, assume general tech and business professionals.\n- If platform preference is missing, produce both LinkedIn and Facebook versions.\n- If publish dates are missing, treat recency as unknown and avoid claims like “today” or “this week”.\n- If URLs are missing, cite sources by title and publisher only.\n\nNON GOALS\n- Do not copy or closely paraphrase any single source.\n- Do not invent statistics, quotes, timelines, or attributions.\n- Do not produce a listicle unless explicitly requested.\n- Do not mention that you used an agent, n8n, web search, or “three articles”.\n- Do not write in American spelling.\n- Do not use em dashes or hyphens.\n- Do not use the words: unlock, dive, master, unwavering, hyphen.\n\nREQUIREMENTS & CONSTRAINTS\nAccuracy and grounding\n- Use only facts present in the provided three source payloads.\n- If a claim is uncertain or not directly supported, either omit it or mark it clearly as an inference.\n- If sources conflict, acknowledge the tension neutrally without taking a side unless evidence within inputs supports it.\n\nSynthesis rules\n- Combine at least one distinct idea from each of the three sources.\n- Balance the post so it does not read like a stitched summary.\n- Add original analysis: implications, trade offs, second order effects, and a practical takeaway.\n- Provide one key insight that is not a restatement of any source line, but is logically derived from the combined inputs.\n\nStyle and voice\n- British English.\n- A controlled, lyrical sharpness reminiscent of Prof. Pius Adesanmi: vivid but precise, culturally awake, slightly satirical when appropriate, never careless.\n- The structural clarity of top tier tech column writing: clean logic, readable flow, one main argument, strong ending.\n- Avoid fluff and generic motivation.\n- No heavy formatting.\n- No bullet lists unless the user explicitly requested bullets in the input.\n- Short paragraphs for mobile readability.\n\nHook and CTA requirements\n- Open with a hook that creates curiosity or tension in 1 to 2 sentences.\n- End with a CTA that invites comments or a specific action.\n- The CTA must be natural and specific, not “share your thoughts” alone.\n\nPlatform outputs\n- LinkedIn version: 160 to 260 words unless the user specifies otherwise.\n- Facebook version: 120 to 200 words unless the user specifies otherwise.\n- The two versions must not be identical. Adjust rhythm and directness for each platform.\n\nSource attribution inside the post\n- Do not include raw URLs.\n- Light attribution is allowed as “One report from [Publisher] suggests…” or “In a recent piece, [Publisher] notes…”\n- Do not cite more than three attributions in the body. Keep it elegant.\n\nSafety and policy\n- Do not produce defamation.\n- Do not provide legal, medical, or financial advice as final guidance.\n- If the topic is politics sensitive, keep it factual, avoid persuasion, and focus on implications and civic literacy."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -128,
        112
      ],
      "id": "c3d3c9a8-9065-4667-babb-02d37220310b",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "160TV4rIY_Uh6yBQEQCUwnQMyHI7DOHCdlQQ21RAFMhE",
          "mode": "list",
          "cachedResultName": "post",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/160TV4rIY_Uh6yBQEQCUwnQMyHI7DOHCdlQQ21RAFMhE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/160TV4rIY_Uh6yBQEQCUwnQMyHI7DOHCdlQQ21RAFMhE/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "status",
              "lookupValue": "To Do"
            }
          ]
        },
        "options": {
          "returnFirstMatch": true
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -544,
        112
      ],
      "id": "d4829710-f745-4a47-934b-86b75298b350",
      "name": "Get row(s) in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "sZZFN1ncUySEXJWt",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -272,
        320
      ],
      "id": "9c9a01e7-5e1e-4e7d-98cf-a0e2d74dd60c",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "qldqV2djTvGHQFeZ",
          "name": "n8n free OpenAI API credits"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "160TV4rIY_Uh6yBQEQCUwnQMyHI7DOHCdlQQ21RAFMhE",
          "mode": "list",
          "cachedResultName": "post",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/160TV4rIY_Uh6yBQEQCUwnQMyHI7DOHCdlQQ21RAFMhE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/160TV4rIY_Uh6yBQEQCUwnQMyHI7DOHCdlQQ21RAFMhE/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "topic": "={{ $('Get row(s) in sheet').item.json.topic }}",
            "status": "Created",
            "content": "={{ $json.output }}"
          },
          "matchingColumns": [
            "topic"
          ],
          "schema": [
            {
              "id": "topic",
              "displayName": "topic",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "content",
              "displayName": "content",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        224,
        112
      ],
      "id": "295d5998-e5c3-43d8-b82b-8d9110f00436",
      "name": "Update row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "sZZFN1ncUySEXJWt",
          "name": "Google Sheets account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "ae2a3dad-df23-4422-979f-1c477f866bcd",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "9d74db7753ab2ff09eb448d74edca403fbaef2aa966de4b7d9202aca6dd91803"
  },
  "id": "FEYGdFUD6qBpHFg5",
  "tags": []
}